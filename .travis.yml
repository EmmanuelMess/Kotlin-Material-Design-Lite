matrix:
  include:
    language: php
    php:
      - 7.1.9

    before_install:
      - travis_retry composer self-update
      - composer install

    script: 
      - phpunit --exclude-group FITS --bootstrap vendor/autoload.php tests


    language: java	
    jdk: oraclejdk8

    before_install:
      - cd frontend
      - chmod +x ./gradlew

    script:
      - ./gradlew build --scan -s

    before_cache:
      - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
      - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

    cache:
      directories:
        - $HOME/.gradle/caches/
        - $HOME/.gradle/wrapper/


deploy:
  provider: heroku
  api_key:
    secure: "YNpX9kbAWxPwrSYgHTFSRXY+Cz71+ZY6hkE1GDpaJ7TnkMoRHenYbqktaBXl+pkNgXYjRiGLwDsFhgMJQ05HOjMKMGY/coAlk/o7hbHDUiMdJSeaTe730jscVBTV5X/3YovNmrRelDxb46MFmsbMuJ9tyWkEU0VOCEJC5xGOGjl0n3QCwJz74or4QU2sYnVfmSLksHfRSJ8aXyAROSQJ3aeA+wpsRNsnArZ9sWcTk353gsqqo1PcGCoSU6PbRPezE8+T29Q0Gvqn4hq+KZnmDXBjIiM55HThiJQ0v6SrNm3QlkJ9SAWS8NlIIS5OH/VeMpwQFAH2o/9a3OAuGDTufrkN337nPMaOusBHIpkBQc5Wv8ypS8BziLwiCmGo5ZKgd9hHAm2/UQcZMmw+gpmnTJl4CJM3Rp0wasByUjoH/JlPsXdjx80mi6BQUVLH+vqf4Au/4xK3bsL0e6SSBOW94EQnreL9BOc1gf0Gla2+l3eL6zA76DmbMEpnuWQSGUgnLhnEmIqdlwnq3vq+ujVBUqKKBf1j8lGi1HeY7QKCC3lr6otFkGVKIMbYBzNMe11JNrC1K5mdYdUrjrsIIMZFhidO6HPwqvYxu3BNxECZcXrTNZrvd/vqfYoJJcxXynIR380X+ZOKzkPwA2PtLSxyD6hZgQCzhafG3pMdBB6ZGK4="
  app: School-Web-Project
  on:
      repo: EmmanuelMess/School-Web-Project
      all_branches: true
